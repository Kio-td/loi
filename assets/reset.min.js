/*global json err inf suc webwsocket*/

let wsocket = new WebSocket(websocket+"/anon")
wsocket.onerror = function (e) { err("Something wrong has happened with the back of the server. Please DM the administrators on discord.") }
wsocket.onclose = function (e) { err("Something wrong has happened with the server. Please DM the admins on discord.") }

function reset() {
	wsocket.onmessage = function(jsonData) {
		let parsedData = JSON.parse(jsonData)
		if (parsedData.ok === false) {
			switch(parsedData.msg) {
				case "FRAUD":
				window.location = "https://www.youtube.com/watch?v=umDr0mPuyQc"
				break;

				case "DIFFERENT":
				err("The two passwords are different. Try again.")
			}
		} else {
			window.location = "login"
		}
	}
	wsocket.send(JSON.stringify({
		cmd: "ress2",
		data: {
			code: document.getElementById("token").value,
			password: document.getElementById("pw").value,
			conpass: document.getElementById("cpw").value
		}
	}))
}