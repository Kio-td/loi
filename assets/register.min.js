/*global err*/
var s = new WebSocket(websocket+"/anon")

function emai () {
  s.onmessage = function (e) {
    data = JSON.parse(e.data).data, !1 === data && err("That email is already used.")
  }
}

function us () {
  s.onmessage = function (e) {
    data = JSON.parse(e.data).data, data === "F" ? err("Your username is already used.") : data === "BL" && err("Your username is on the blacklist.")
  }
}

function sub () {
  s.onmessage = function (e) {
    data = JSON.parse(e.data), !1 === data.ok ? data.msg === "ACCT_BLACKLIST" ? err("This username has been blacklisted.") : data.msg === "ACCT_EXISTS" && err("This Username or Email already exists.") : suc("Check your email to confirm your account.<br>Welcome to Arden.")
  }, s.send(JSON.stringify({
    cmd: "register",
    data: {
      username: document.getElementById("un").value,
      password: document.getElementById("pw").value,
      email: document.getElementById("em").value,
      sp: document.getElementById("data").value
    }
  }))
}

function f (a) {
  nrk.forEach(function (e) {
    e.sid === a.value && (document.getElementById("info").innerText = e.description)
  })
}

function cun (e) {
  s.send(JSON.stringify({
    cmd: "cun",
    data: e.value
  }))
}

function cem (e) {
  s.send(JSON.stringify({
    cmd: "cem",
    data: e.value
  }))
}
s.onerror = function (e) {
  err("Something wrong has happened with the back of the server. Please DM the administrators on discord.")
}, s.onclose = function (e) {
  err("Something wrong has happened with the server. Please DM the admins on discord.")
}, data = "", i = 0, dx = 0, e = 0, u = 0, nrk = "", s.onmessage = function (e) {
  JSON.parse(e.data).code === 3 ? s.send("{cmd:'species'}") : (nrk = JSON.parse(e.data).data, nrk.forEach(function (e) {
    i++, x = document.getElementById("data"), h = document.createElement("option"), h.text = e.sname, h.value = e.sid, x.add(h), i === 1 && (document.getElementById("info").innerText = e.description)
  })), dx = 1
}
